extends layout
block content
  div.row
    div.col-md-3
      div.messenger
    div.col-md-6
      h1 Online Pictionary
      p Welcome to Online Pictionary
      canvas#myDrawing(height=500, width=500, style={border: '1px solid #000000',width:"100%",height:"auto"})
        p Your browser doesn't support canvas
  div.row
    div.col-md-3
    div.col-md-6
      button(type='button' id='clear') Clear

  script(src='/js/drawing.js')
  script(src='/js/messenger.js')
  script.
    let whiteboard;
    $(document).ready(function () {
      let socket = io();
      if ("#{game}" != "")
        socket.emit('join_room', '#{game}');
      whiteboard = $("#myDrawing").pictWhiteboard({socket: socket, draw: #{drawing || false}});
      let messenger = $('.messenger').pictMessenger({socket: socket, height: 60});
      $('#clear').click(function() {
        whiteboard.clear();
        socket.emit('draw', {clear: true});
      });
    });